<header appKeyboardNav>

  <nav>

    <!-- Brand -->
    <a routerLink="/" class="brand" appSpeak="Learnable Home">
      Learnable
    </a>

    <!-- Right Side (Desktop + Mobile Icons) -->
    <div class="flex items-center gap-3">

      <!-- Accessibility Icon -->
      <button (click)="toggleMenu()" 
              class="p-2 rounded-full hover:bg-white/20 transition md:block hidden">
        <svg xmlns="http://www.w3.org/2000/svg" class="size-6" fill="currentColor" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
            d="M11.914 4.086a2 2 0 0 0-2.828 0l-5 5a2 2 0 1 0 2.828 2.828l.556-.555a.75.75 0 0 1 1.06 1.06l-.555.556a3.5 3.5 0 0 1-4.95-4.95l5-5a3.5 3.5 0 0 1 4.95 4.95l-1.972 1.972a.625.625 0 0 0 .884.883l1.972-1.972a2 2 0 0 0 0-2.828Z" />
        </svg>
      </button>

      <!-- Desktop Nav Links -->
      <ul class="nav-links">
        @if (accountService.currentUser()) {
          <li><a routerLink="/dashboad" routerLinkActive="active" appSpeak="Profile" (click)="closeMobileMenu()">Profile</a></li>
          <li><a routerLink="/notification" routerLinkActive="active" appSpeak="Notifications" (click)="closeMobileMenu()">Notifications</a></li>
          <li><a (click)="logout(); closeMobileMenu()">Logout</a></li>
        } @else {
          <li><a routerLink="/" routerLinkActive="active" appSpeak="Home" (click)="closeMobileMenu()">Home</a></li>
          <li><a routerLink="/about" routerLinkActive="active" appSpeak="About" (click)="closeMobileMenu()">About</a></li>
          <li><a routerLink="/features" routerLinkActive="active" appSpeak="Features" (click)="closeMobileMenu()">Features</a></li>
          <li><a routerLink="/testimonials" routerLinkActive="active" appSpeak="Testimonials" (click)="closeMobileMenu()">Testimonials</a></li>
        }
      </ul>

      <!-- Hamburger - Mobile -->
      <button id="mobile-menu-toggle" class="md:hidden">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>

    </div>

  </nav>

  <!-- Accessibility Menu (Desktop & Mobile) -->
  @if (showMenu) {
    <div class="absolute right-6 top-16 bg-white text-black rounded shadow-md p-2 w-40 z-50" appKeyboardNav>
      <button class="w-full px-3 py-2 hover:bg-gray-200" (click)="setMode('blind'); closeMobileMenu()" appSpeak="Blind Mode">Blind Mode</button>
      <button class="w-full px-3 py-2 hover:bg-gray-200" (click)="setMode('deaf'); closeMobileMenu()" appSpeak="Deaf Mode">Deaf Mode</button>
    </div>
  }

  <!-- Mobile Menu -->
  <div id="mobile-menu">
    @if (showMenu) {
      <div class="bg-white text-black rounded shadow-md p-2 ">
        <button class="w-full px-3 py-2 hover:bg-gray-200" (click)="setMode('blind'); closeMobileMenu()" appSpeak="Blind Mode">Blind Mode</button>
        <button class="w-full px-3 py-2 hover:bg-gray-200" (click)="setMode('deaf'); closeMobileMenu()" appSpeak="Deaf Mode">Deaf Mode</button>
      </div>
    }

    @if (accountService.currentUser()) {
      <a routerLink="/dashboad" (click)="closeMobileMenu()">Profile</a>
      <a routerLink="/notification" (click)="closeMobileMenu()">Notifications</a>
      <a (click)="logout(); closeMobileMenu()">Logout</a>
    } @else {
      <a routerLink="/" (click)="closeMobileMenu()">Home</a>
      <a routerLink="/about" (click)="closeMobileMenu()">About</a>
      <a routerLink="/features" (click)="closeMobileMenu()">Features</a>
      <a routerLink="/testimonials" (click)="closeMobileMenu()">Testimonials</a>
    }
  </div>

</header>
