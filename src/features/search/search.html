<div class="relative w-full search-wrapper">
  
  <!-- Search Box -->
  <div
    class="relative flex items-center rounded-xl shadow-lg border 
           focus-within:ring-2 focus-within:ring-accent transition-all duration-200"
    style="background-color: var(--color-dark); border-color: var(--color-light);"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400 ml-4 mr-2"
         fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
    </svg>

    <input
      type="text"
      [(ngModel)]="searchText"
      (click)="toggleDropdown()"
      placeholder="Search users or classes..."
      class="w-full py-3 pr-4 text-[var(--color-light)] bg-[var(--color-dark)] 
             placeholder-gray-400 focus:outline-none rounded-r-xl"
      (input)="handleSearchInput($event)"
      aria-label="Search users or classes"
    />
  </div>

  <!-- Dropdown -->
  <div
    *ngIf="isDropdownVisible() && searchResults().length > 0"
    class="absolute mt-3 right-0 w-full md:w-96 bg-[var(--color-dark)] 
           border border-[var(--color-light)] rounded-xl shadow-2xl 
           max-h-72 overflow-y-auto z-50 transition-opacity duration-300"
  >
    <div
      *ngFor="let item of searchResults()"
      (click)="viewDetails(item.id, item.type)"
      class="p-4 flex justify-between items-center cursor-pointer 
             hover:bg-[#212f40] transition-colors duration-150 
             border-b border-gray-700 last:border-b-0"
    >
      <div class="flex-1 min-w-0 pr-4">
        <p class="text-[var(--color-light)] font-bold text-base truncate">
          {{ item.title }}
        </p>
        <p class="text-gray-400 text-sm truncate mt-0.5">
          {{ item.subTitle }}
        </p>

        <span
          class="inline-block mt-2 text-xs font-semibold px-2.5 py-0.5 rounded-full"
          [ngClass]="{
            'bg-green-700 text-green-100': item.type === 'User',
            'bg-[var(--color-accent)] text-white': item.type === 'Class'
          }"
        >
          {{ item.type }}
        </span>
      </div>

      <button
        (click)="viewDetails(item.id, item.type); $event.stopPropagation()"
        class="flex-shrink-0 px-4 py-1.5 bg-[var(--color-accent)] 
               text-white font-semibold rounded-full hover:brightness-90 
               transition shadow-md"
      >
        View
      </button>
    </div>
  </div>
</div>
