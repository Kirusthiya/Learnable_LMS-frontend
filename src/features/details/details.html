<div class="pt-24 flex justify-center px-4">
  <div *ngIf="classDetails() || userDetails()" class="max-w-lg w-full bg-gray-900 text-white rounded-2xl shadow-2xl p-8 space-y-6">

    <!-- ================= CLASS DETAILS ================= -->
    <div *ngIf="classDetails()" class="space-y-3">
      <h2 class="text-3xl font-bold text-center text-primary">
        {{ classDetails()?.className }}
      </h2>
      <p class="text-center text-gray-400 italic">
        {{ classDetails()?.description }}
      </p>

      <hr class="border-gray-700 my-4"/>

      <h3 class="text-lg font-semibold text-center text-gray-200">Teacher Details</h3>
      <div class="text-center space-y-1">
        <p class="text-gray-300"><strong>Name:</strong> {{ classDetails()?.teacher.fullName }}</p>
        <p class="text-gray-300"><strong>Email:</strong> {{ classDetails()?.teacher.email }}</p>
        <p class="text-gray-300"><strong>Bio:</strong> {{ classDetails()?.teacher.bio }}</p>
      </div>

      <hr class="border-gray-700 my-4"/>
    </div>

    <!-- ================= USER DETAILS ================= -->
   <div *ngIf="userDetails()" class="space-y-4">
      <h2 class="text-2xl font-bold text-center">{{ userDetails()?.fullName }}</h2>
      <h3 class="text-lg font-medium text-center text-gray-300">{{ userDetails()?.displayName }}</h3>

      <h3 class="text-lg font-semibold mt-4 text-gray-200">Select a Class:</h3>
      
      <select
        [(ngModel)]="selectedClassId"
        class="w-full p-3 mt-2 rounded-xl bg-gray-800 text-white border border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary"
      >
        <option value="" disabled selected>Select Class</option>
        
        <option *ngFor="let c of currentUserClasses()" [value]="c.classId">
          {{ c.className }}
        </option>
      
      </select>

      <p *ngIf="currentUserClasses().length === 0" class="text-red-400 mt-2 text-center">
        No classes found for your account.
      </p>
    </div>

    <!-- ================= SEND REQUEST BUTTON ================= -->
    <button 
      (click)="handleJoinClass()" 
      [disabled]="joinLoading()" 
      class="w-full px-6 py-3 bg-primary hover:bg-primary/90 rounded-xl font-semibold transition-all shadow-lg"
    >
      <span *ngIf="joinLoading()">Sending Request...</span>
      <span *ngIf="!joinLoading()">Send Request</span>
    </button>

    <p *ngIf="joinMessage()" class="text-green-400 text-center font-medium">{{ joinMessage() }}</p>

  </div>

  <div *ngIf="!classDetails() && !userDetails()" class="text-gray-400 text-center text-lg">
    Loading details...
  </div>
</div>
